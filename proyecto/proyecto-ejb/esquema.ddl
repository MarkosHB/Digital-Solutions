CREATE TABLE AUTORIZACION (TIPO VARCHAR, EM_ID BIGINT NOT NULL, PA_ID BIGINT NOT NULL, PRIMARY KEY (EM_ID, PA_ID))
CREATE TABLE PERSONA_AUTORIZADA (ID BIGINT NOT NULL, FECHAFIN DATE, FECHAINICIO DATE, APELLIDOS VARCHAR NOT NULL, DIRECCION VARCHAR NOT NULL, ESTADO VARCHAR, FECHA_NACIMIENTO DATE, NOMBRE VARCHAR NOT NULL, US_USUARIO VARCHAR, PRIMARY KEY (ID))
CREATE TABLE CLIENTE (ID BIGINT NOT NULL, DTYPE VARCHAR(31), CIUDAD VARCHAR NOT NULL, CODIGOPOSTAL INTEGER NOT NULL, DIRECCION VARCHAR NOT NULL, ESTADO VARCHAR NOT NULL, FECHA_ALTA DATE NOT NULL, FECHA_BAJA DATE, PAIS VARCHAR NOT NULL, TIPO_CLIENTE VARCHAR NOT NULL, US_USUARIO VARCHAR, PRIMARY KEY (ID))
CREATE TABLE EMPRESA (ID BIGINT NOT NULL, RAZON_SOCIAL VARCHAR NOT NULL, PRIMARY KEY (ID))
CREATE TABLE CUENTA (IBAN VARCHAR NOT NULL, DTYPE VARCHAR(31), SWIFT VARCHAR, PRIMARY KEY (IBAN))
CREATE TABLE CUENTA_FINTECH (IBAN VARCHAR NOT NULL, CLASIFICACION VARCHAR, ESTADO VARCHAR NOT NULL, FECHA_APERTURA DATE NOT NULL, FECHA_CIERRE DATE, CL_ID BIGINT, PRIMARY KEY (IBAN))
CREATE TABLE CUENTA_REFERENCIA (IBAN VARCHAR NOT NULL, ESTADO VARCHAR, FECHA_APERTURA DATE, NOMBREBANCO VARCHAR NOT NULL, PAIS VARCHAR, SALDO DOUBLE NOT NULL, SUCURSAL VARCHAR, DIV_ABREVIATURA VARCHAR, PRIMARY KEY (IBAN))
CREATE TABLE DEPOSITADO_EN (SALDO DOUBLE NOT NULL, CR_IBAN VARCHAR NOT NULL, PA_IBAN VARCHAR NOT NULL, PRIMARY KEY (CR_IBAN, PA_IBAN))
CREATE TABLE DIVISA (ABREVIATURA VARCHAR NOT NULL, CAMBIOEURO DOUBLE NOT NULL, NOMBRE VARCHAR NOT NULL, SIMBOLO VARCHAR, PRIMARY KEY (ABREVIATURA))
CREATE TABLE INDIVIDUAL (ID BIGINT NOT NULL, APELLIDO VARCHAR NOT NULL, FECHA_NACIMIENTO DATE, NOMBRE VARCHAR NOT NULL, PRIMARY KEY (ID))
CREATE TABLE POOLED_ACCOUNT (IBAN VARCHAR NOT NULL, PRIMARY KEY (IBAN))
CREATE TABLE SEGREGADA (IBAN VARCHAR NOT NULL, COMISION DOUBLE, CR_IBAN VARCHAR, PRIMARY KEY (IBAN))
CREATE TABLE TRANSACCION (ID_UNICO BIGINT NOT NULL, TIPO VARCHAR NOT NULL, CANTIDAD DOUBLE NOT NULL, COMISION DOUBLE, FECHAEJECUCION DATE, FECHAINSTRUCCION DATE NOT NULL, INTERNACIONAL BOOLEAN, DESTINO_IBAN VARCHAR, DIVEM_ABREVIATURA VARCHAR, DIVREC_ABREVIATURA VARCHAR, ORIGEN_IBAN VARCHAR, PRIMARY KEY (ID_UNICO))
CREATE TABLE USUARIO (USUARIO VARCHAR NOT NULL, CORREO VARCHAR, PASSWORD VARCHAR, SALT VARCHAR, PRIMARY KEY (USUARIO))
ALTER TABLE AUTORIZACION ADD CONSTRAINT FK_AUTORIZACION_EM_ID FOREIGN KEY (EM_ID) REFERENCES CLIENTE (ID)
ALTER TABLE AUTORIZACION ADD CONSTRAINT FK_AUTORIZACION_PA_ID FOREIGN KEY (PA_ID) REFERENCES PERSONA_AUTORIZADA (ID)
ALTER TABLE PERSONA_AUTORIZADA ADD CONSTRAINT FK_PERSONA_AUTORIZADA_US_USUARIO FOREIGN KEY (US_USUARIO) REFERENCES USUARIO (USUARIO)
ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_US_USUARIO FOREIGN KEY (US_USUARIO) REFERENCES USUARIO (USUARIO)
ALTER TABLE EMPRESA ADD CONSTRAINT FK_EMPRESA_ID FOREIGN KEY (ID) REFERENCES CLIENTE (ID)
ALTER TABLE CUENTA_FINTECH ADD CONSTRAINT FK_CUENTA_FINTECH_CL_ID FOREIGN KEY (CL_ID) REFERENCES CLIENTE (ID)
ALTER TABLE CUENTA_FINTECH ADD CONSTRAINT FK_CUENTA_FINTECH_IBAN FOREIGN KEY (IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE CUENTA_REFERENCIA ADD CONSTRAINT FK_CUENTA_REFERENCIA_IBAN FOREIGN KEY (IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE CUENTA_REFERENCIA ADD CONSTRAINT FK_CUENTA_REFERENCIA_DIV_ABREVIATURA FOREIGN KEY (DIV_ABREVIATURA) REFERENCES DIVISA (ABREVIATURA)
ALTER TABLE DEPOSITADO_EN ADD CONSTRAINT FK_DEPOSITADO_EN_PA_IBAN FOREIGN KEY (PA_IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE DEPOSITADO_EN ADD CONSTRAINT FK_DEPOSITADO_EN_CR_IBAN FOREIGN KEY (CR_IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE INDIVIDUAL ADD CONSTRAINT FK_INDIVIDUAL_ID FOREIGN KEY (ID) REFERENCES CLIENTE (ID)
ALTER TABLE POOLED_ACCOUNT ADD CONSTRAINT FK_POOLED_ACCOUNT_IBAN FOREIGN KEY (IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE SEGREGADA ADD CONSTRAINT FK_SEGREGADA_CR_IBAN FOREIGN KEY (CR_IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE SEGREGADA ADD CONSTRAINT FK_SEGREGADA_IBAN FOREIGN KEY (IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_DESTINO_IBAN FOREIGN KEY (DESTINO_IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_ORIGEN_IBAN FOREIGN KEY (ORIGEN_IBAN) REFERENCES CUENTA (IBAN)
ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_DIVEM_ABREVIATURA FOREIGN KEY (DIVEM_ABREVIATURA) REFERENCES DIVISA (ABREVIATURA)
ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_DIVREC_ABREVIATURA FOREIGN KEY (DIVREC_ABREVIATURA) REFERENCES DIVISA (ABREVIATURA)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMERIC(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
