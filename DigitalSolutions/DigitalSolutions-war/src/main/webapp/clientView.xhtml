<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:head>
	<title>Informaci√≥n del Cliente</title>
</h:head>

<body>
	<h:form id="clientViewForm">
		<c:choose>
			<c:when test="#{empty infoSesion.usuario}">
				<p id="clientViewNoSesion">
					Inicia seccion y vuelve a esta pagina: <h:link outcome="index.xhtml">inicio</h:link>.
				</p>
			</c:when>
			<c:when test="#{infoSesion.esPa() and empty infoSesion.em}">
				<p id="clientViewNoEm">
					Selecciona primero una empresa para la que quieres ver las cuentas: <h:link outcome="personaAutorizadaView.xhtml">Empresas</h:link>.
				</p>
			</c:when>
			<c:when test="#{infoSesion.esPa()}">
			<p id="clientViewInfoTextPa">Si deseas ver informacion sobre la empresa: <h:button id="paAInfo" value="Info" outcome="infoCliente.xhtml"/></p>
				<br/>
				<h1>Cuentas disponibles</h1>
				<h:dataTable value="#{infoSesion.em.cf}" var="cuentaPa">
					<h:column>
						<f:facet id="clientViewC1HPa" name="header">IBAN</f:facet>
						<h:outputText id="clientViewC1TPa"  value="#{cuentaPa.IBAN}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC2HPa" name="header">Estado</f:facet>
						<h:outputText id="clientViewC2TPa"  value="#{cuentaPa.estado}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC3HPa" name="header">Tipo</f:facet>
						<h:outputText id="clientViewC3TPa"  value="#{infoCuentas.tipoCuenta(cuentaPa)}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC4HPa" name="header">Saldo</f:facet>
						<h:outputText id="clientViewC4TPa"  value="#{infoCuentas.sacarSaldo(cuentaPa)}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC5HPa" name="header"></f:facet>
						<h:commandButton id="clientViewC5BPa"  value="Entrar" action="#{infoCuentas.seleccionarCuenta(cuentaPa)}" />
					</h:column>
				</h:dataTable>
			</c:when>
			<c:otherwise>			
				<p id="clientViewInfoTextId">Si deseas ver informacion sobre su cuenta: <h:button id="paAInfo" value="Info" outcome="infoCliente.xhtml"/></p>
				<br/>
				<h1>Cuentas disponibles</h1>
				<h:dataTable value="#{infoSesion.id.cf}" var="cuentaId">
					<h:column>
						<f:facet id="clientViewC1HId" name="header">IBAN</f:facet>
						<h:outputText id="clientViewC1TId" value="#{cuentaId.IBAN}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC2HId" name="header">Estado</f:facet>
						<h:outputText id="clientViewC2TId"  value="#{cuentaId.estado}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC3HId" name="header">Tipo</f:facet>
						<h:outputText id="clientViewC3TId"  value="#{infoCuentas.tipoCuenta(cuentaId)}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC4HId" name="header">Saldo</f:facet>
						<h:outputText id="clientViewC4TId"  value="#{infoCuentas.sacarSaldo(cuentaId)}" />
					</h:column>
					<h:column>
						<f:facet id="clientViewC5HId" name="header"></f:facet>
						<h:commandButton id="clientViewC5BId"  value="Entrar" action="#{infoCuentas.seleccionarCuenta(cuentaId)}" />
					</h:column>
				</h:dataTable>
			</c:otherwise>
		</c:choose>
	</h:form>
</body>

</html>
